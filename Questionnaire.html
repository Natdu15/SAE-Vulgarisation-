<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="images/logo-sd.png" href="images/logo-sd.png">
    <link rel="stylesheet" href="css/choix.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <title>Apprendre à mieux vous connaître</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        header {
            text-align: center;
            padding: 2rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 2rem;
            text-align: center;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 3s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .categories {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .category {
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .category:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .category.selected {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        #roundIndicator {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem auto;
            max-width: 400px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .card-container {
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            transition: opacity 0.3s ease;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 400px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .gradient-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn-finish {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .btn-finish:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .winner {
            text-align: center;
            padding: 3rem 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .winner h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .winner h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #f39c12;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .victory-background {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: victoryGradient 4s ease infinite;
        }

        @keyframes victoryGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }
            
            .card-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .categories {
                flex-direction: column;
                align-items: center;
            }
            
            .category {
                width: 100%;
                max-width: 300px;
                text-align: center;
            }

            #roundIndicator {
                margin: 1rem;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>

  <header>
    <h1>Apprendre à mieux vous connaître !</h1>
    <div class="categories">
      <div class="category selected" data-category="Matières Général">Matières Général</div>
      <div class="category" data-category="Mathématique Général">Mathématique Général</div>
      <div class="category" data-category="Programmation Général">Programmation Général</div>
      <div class="category" data-category="Anglais/Droit/Eco/Communication">Anglais/Droit/Eco/Communication</div>
      <div class="category" data-category="Vos Motivations Général">Vos Motivations Général</div>
    </div>
    <div id="roundIndicator">Round 1</div>
  </header>

  <div class="card-container">
    <div class="card" id="card1"></div>
    <div class="card" id="card2"></div>    
  </div>

  <script>
// Système de test de personnalité pour BUT Science des Données
document.addEventListener('DOMContentLoaded', () => {

  // Configuration des questions par thème avec vos dilemmes
  const questionsData = {
  "Matières Général": [
    {
      question: "Es-tu intéressé(e) par les statistiques et la probabilité pour comprendre le monde ?",
      choiceA: { text: "Plutôt Oui", points: { statistique: 3, analytique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { protection: 2, securite: 1 } }
    },
    {
      question: "Aimes-tu apprendre de nouveaux langages de programmation (Python, R, SQL) pour analyser des données ?",
      choiceA: { text: "Plutôt Oui", points: { logique: 3, technique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { analytique: 2, statistique: 1 } }
    },
    {
      question: "Est-ce que l’idée de nettoyer et transformer des données brutes te semble motivante ?",
      choiceA: { text: "Plutôt Oui", points: { systematique: 3, technique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { securite: 2, protection: 2 } }
    },
    {
      question: "Aimes-tu créer des tableaux de bord ou des rapports automatisés pour présenter des résultats ?",
      choiceA: { text: "Plutôt Oui", points: { technique: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { analytique: 2, statistique: 1 } }
    },
    {
      question: "Es-tu à l’aise pour présenter tes résultats devant un groupe (par exemple en amphi) ?",
      choiceA: { text: "Plutôt Oui", points: { communication: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { analytique: 2, statistique: 1 } }
    },
    {
      question: "Est-ce que tu aimes apprendre du vocabulaire technique en anglais lié à la data ?",
      choiceA: { text: "Plutôt Oui", points: { technique: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { statistique: 2, analytique: 1 } }
    },
    {
      question: "Est-ce que les questions éthiques autour de la donnée (vie privée, biais, consentement) t’intéressent ?",
      choiceA: { text: "Plutôt Oui", points: { protection: 3, ethique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { statistique: 2, analytique: 1 } }
    }
  ],
  "Mathématique Général": [
    {
      question: "Aimes-tu analyser des données chiffrées pour trouver des tendances cachées ?",
      choiceA: { text: "Plutôt Oui", points: { analytique: 3, donnees: 2 } },
      choiceB: { text: "Vraiment Pas", points: { creatif: 2, communication: 1 } }
    },
    {
      question: "Es-tu à l’aise avec des calculs comme moyenne, variance ou médiane ?",
      choiceA: { text: "Plutôt Oui", points: { statistique: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { creatif: 2, ludique: 1 } }
    },
    {
      question: "Est-ce que les probabilités et le hasard (tirages aléatoires, modèles probabilistes) t’intéressent ?",
      choiceA: { text: "Plutôt Oui", points: { probabilite: 3, systematique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { communication: 2, visualisation: 1 } }
    },
    {
      question: "Aimes-tu résoudre des théorèmes ou problèmes mathématiques abstraits ?",
      choiceA: { text: "Plutôt Oui", points: { logique: 3, methodique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, investigation: 1 } }
    },
    {
      question: "Es-tu prêt(e) à revoir des notions de maths que tu trouves difficiles ?",
      choiceA: { text: "Plutôt Oui", points: { rigoureux: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { creatif: 2, communication: 1 } }
    },
    {
      question: "Les preuves mathématiques (montrer qu’un résultat est vrai) t’attirent-elles ?",
      choiceA: { text: "Plutôt Oui", points: { logique: 3, statistique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { creatif: 2, ludique: 1 } }
    },
    {
      question: "Aimes-tu faire des simulations ou expériences probabilistes ?",
      choiceA: { text: "Plutôt Oui", points: { probabilite: 3, donnees: 2 } },
      choiceB: { text: "Vraiment Pas", points: { creatif: 2, communication: 1 } }
    },
    {
      question: "Est-ce que modéliser un phénomène réel avec une fonction ou une équation t’intéresse ?",
      choiceA: { text: "Plutôt Oui", points: { modelisation: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { communication: 2, creatif: 1 } }
    }
  ],
  "Programmation Général": [
    {
      question: "Aimes-tu coder pour résoudre des problèmes concrets en data (Python, R, SQL) ?",
      choiceA: { text: "Plutôt Oui", points: { independant: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { collaboratif: 2, social: 1 } }
    },
    {
      question: "Penses-tu que savoir automatiser des tâches avec du code est utile ?",
      choiceA: { text: "Plutôt Oui", points: { technique: 3, methodique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, creatif: 1 } }
    },
    {
      question: "Est-ce que manipuler des données via du code te motive (nettoyage, transformation) ?",
      choiceA: { text: "Plutôt Oui", points: { donnees: 3, technique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, investigation: 1 } }
    },
    {
      question: "Persévères-tu face aux bugs et erreurs de code ?",
      choiceA: { text: "Plutôt Oui", points: { resilient: 3, methodique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, creatif: 1 } }
    },
    {
      question: "Aimes-tu développer des projets liant mathématiques et programmation ?",
      choiceA: { text: "Plutôt Oui", points: { logique: 3, technique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, creatif: 1 } }
    },
    {
      question: "Es-tu à l’aise pour lire une documentation technique de code ?",
      choiceA: { text: "Plutôt Oui", points: { technique: 3, independant: 2 } },
      choiceB: { text: "Vraiment Pas", points: { collaboratif: 2, social: 1 } }
    },
    {
      question: "Aimes-tu visualiser des données avec du code (dashboards, graphiques) ?",
      choiceA: { text: "Plutôt Oui", points: { visualisation: 3, creatif: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, social: 1 } }
    },
    {
      question: "L’optimisation du code et la performance t’intéressent-elles ?",
      choiceA: { text: "Plutôt Oui", points: { logique: 3, optimisation: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, creatif: 1 } }
    }
  ],
  "Anglais/Droit/Eco/Communication": [
    {
      question: "Es-tu intéressé(e) par l’impact économique et stratégique des données ?",
      choiceA: { text: "Plutôt Oui", points: { economique: 3, analytique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, creatif: 1 } }
    },
    {
      question: "Les questions éthiques sur les données (biais, vie privée) te semblent-elles importantes ?",
      choiceA: { text: "Plutôt Oui", points: { ethique: 3, protection: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, investigation: 1 } }
    },
    {
      question: "As-tu envie de comprendre les lois qui encadrent l’usage des données ?",
      choiceA: { text: "Plutôt Oui", points: { reglementaire: 3, technique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, creatif: 1 } }
    },
    {
      question: "Penses-tu que les données influencent les décisions politiques ou d’entreprise ?",
      choiceA: { text: "Plutôt Oui", points: { strategique: 3, economique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, curieux: 1 } }
    },
    {
      question: "Lis-tu des articles ou documentations en anglais sans trop de difficulté ?",
      choiceA: { text: "Plutôt Oui", points: { communication: 3, international: 2 } },
      choiceB: { text: "Vraiment Pas", points: { local: 2, social: 1 } }
    },
    {
      question: "Es-tu capable de présenter ton travail en anglais si nécessaire ?",
      choiceA: { text: "Plutôt Oui", points: { communication: 3, international: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, collaboratif: 1 } }
    },
    {
      question: "Es-tu à l’aise pour vulgariser tes résultats devant un public ?",
      choiceA: { text: "Plutôt Oui", points: { communication: 3, pedagogie: 2 } },
      choiceB: { text: "Vraiment Pas", points: { analytique: 2, statistique: 1 } }
    },
    {
      question: "Aimes-tu faire des visuels clairs (infographies, graphiques) pour expliquer tes analyses ?",
      choiceA: { text: "Plutôt Oui", points: { visualisation: 3, creatif: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, investigation: 1 } }
    }
  ],
  "Vos Motivations Général": [
    {
      question: "Es-tu prêt(e) à investir du temps dans des apprentissages complexes liés aux données ?",
      choiceA: { text: "Plutôt Oui", points: { travailleur: 3, methodique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { curieux: 2, social: 1 } }
    },
    {
      question: "Aimes-tu travailler seul(e) mais aussi collaborer quand c’est nécessaire ?",
      choiceA: { text: "Plutôt Oui", points: { collaboratif: 3, autonome: 2 } },
      choiceB: { text: "Vraiment Pas", points: { independant: 2, social: 1 } }
    },
    {
      question: "Aimes-tu relever des défis intellectuels ?",
      choiceA: { text: "Plutôt Oui", points: { ambitieux: 3, logique: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, curieux: 1 } }
    },
    {
      question: "Es-tu capable de rebondir après des erreurs ou échecs ?",
      choiceA: { text: "Plutôt Oui", points: { resilient: 3, travailleur: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, curieux: 1 } }
    },
    {
      question: "Préfères-tu un travail varié (statistiques, code, communication) plutôt que routinier ?",
      choiceA: { text: "Plutôt Oui", points: { polyvalent: 3, creatif: 2 } },
      choiceB: { text: "Vraiment Pas", points: { methodique: 2, systematique: 1 } }
    },
    {
      question: "Es-tu curieux(se) de découvrir de nouveaux domaines via la donnée ?",
      choiceA: { text: "Plutôt Oui", points: { curieux: 3, explorateur: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, local: 1 } }
    },
    {
      question: "Penses-tu qu’il faudra continuer à apprendre même après ta formation ?",
      choiceA: { text: "Plutôt Oui", points: { visionnaire: 3, travailleur: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, collaboratif: 1 } }
    },
    {
      question: "Te vois-tu évoluer dans un monde où la donnée est centrale ?",
      choiceA: { text: "Plutôt Oui", points: { strategique: 3, ambitieux: 2 } },
      choiceB: { text: "Vraiment Pas", points: { social: 2, creatif: 1 } }
    }
  ]
};


  // On fait le profil de personnalité par thème
  const personalityProfiles = {
  "Matières Général": {
    "L'Analyste de Données": {
      description: "Tu aimes manipuler les chiffres, comprendre les probabilités et donner du sens aux données brutes.",
      traits: ["statistique", "analytique"],
      career: "Data Analyst, Biostatisticien, Actuaire"
    },
    "Le Gardien des Données": {
      description: "Tu es sensible aux enjeux de sécurité et à la protection des informations. Tu veilles à ce que les données soient utilisées de manière responsable.",
      traits: ["securite", "protection"],
      career: "Expert cybersécurité, Data Privacy Officer, Consultant RGPD"
    },
    "Le Logicien Technique": {
      description: "Tu excelles dans la programmation, les algorithmes et les tableaux de bord automatisés.",
      traits: ["logique", "technique"],
      career: "Data Engineer, Développeur Python/R, Ingénieur logiciel"
    },
    "L’Architecte des Bases": {
      description: "Tu aimes organiser, structurer et transformer les données pour qu’elles soient exploitables.",
      traits: ["systematique", "donnees"],
      career: "Data Engineer, Administrateur bases de données, Architecte Cloud"
    }
  },
  "Mathématique Général": {
    "Le Détective de Modèles": {
      description: "Tu prends plaisir à repérer des tendances cachées et à modéliser des phénomènes avec des outils mathématiques.",
      traits: ["donnees", "systematique"],
      career: "Statisticien, Data Scientist, Chercheur en modélisation"
    },
    "Le Spécialiste de la Visualisation": {
      description: "Tu sais rendre des données complexes compréhensibles grâce à des graphiques clairs et impactants.",
      traits: ["visualisation", "communication"],
      career: "Data Visualizer, Business Intelligence Analyst, Consultant BI"
    },
    "Le Mathématicien Curieux": {
      description: "Tu es motivé par les théorèmes, les preuves et la modélisation abstraite.",
      traits: ["logique", "technique", "methodique"],
      career: "Chercheur en mathématiques appliquées, Data Scientist, Actuaire"
    },
    "L’Explorateur Probabiliste": {
      description: "Tu es attiré par les probabilités, les simulations et l’incertitude des phénomènes réels.",
      traits: ["investigation", "curieux"],
      career: "Spécialiste Machine Learning, Analyste en risques, Statisticien"
    }
  },
  "Programmation Général": {
    "Le Codeur Autonome": {
      description: "Tu es à l’aise en programmation et tu avances de manière indépendante avec rigueur.",
      traits: ["independant", "concentre"],
      career: "Développeur Data, Consultant indépendant, Data Engineer"
    },
    "Le Débogueur Persévérant": {
      description: "Tu n’as pas peur des bugs, tu cherches des solutions et tu progresses par essais et erreurs.",
      traits: ["technique", "methodique"],
      career: "Ingénieur logiciel, Développeur Python, Data Engineer"
    },
    "Le Visualiseur Numérique": {
      description: "Tu aimes coder pour donner vie aux données sous forme de graphiques, dashboards et applications.",
      traits: ["creatif", "methodique"],
      career: "Développeur BI, Data Visualizer, Analyste Front-End Data"
    },
    "L’Optimiseur d’Algorithmes": {
      description: "Tu recherches la performance, l’efficacité et l’élégance dans le code.",
      traits: ["technique", "methodique", "logique"],
      career: "Data Scientist, Ingénieur en IA, Optimiseur d’algorithmes"
    }
  },
  "Anglais/Droit/Eco/Communication": {
    "Le Stratège Éthique": {
      description: "Tu comprends l’importance de l’éthique, du droit et de la réglementation autour des données.",
      traits: ["ethique", "pragmatique", "reglementaire"],
      career: "Juriste Data, Data Protection Officer, Consultant RGPD"
    },
    "Le Communicateur International": {
      description: "Tu es à l’aise avec l’anglais et tu sais expliquer clairement les enjeux liés aux données.",
      traits: ["communication", "international", "technique"],
      career: "Consultant data international, Responsable communication data, Business Analyst"
    },
    "L’Économiste de la Data": {
      description: "Tu analyses l’impact économique de la donnée et sa valeur stratégique pour les entreprises.",
      traits: ["economique", "analytique"],
      career: "Data Economist, Consultant en stratégie, Business Intelligence"
    },
    "Le Pédagogue de la Donnée": {
      description: "Tu sais vulgariser et enseigner les concepts techniques à un public varié.",
      traits: ["didactique", "communication", "pratique"],
      career: "Formateur data, Enseignant-chercheur, Data Evangelist"
    }
  },
  "Vos Motivations Général": {
    "Le Passionné Curieux": {
      description: "Tu es prêt à apprendre en continu et à découvrir de nouveaux domaines à travers les données.",
      traits: ["curieux", "travailleur"],
      career: "Data Scientist, Chercheur, Consultant data"
    },
    "Le Collaboratif Ambitieux": {
      description: "Tu sais travailler seul mais aussi en équipe, avec l’envie d’aller toujours plus loin.",
      traits: ["ambitieux", "collaboratif"],
      career: "Chef de projet data, Product Owner, Manager BI"
    },
    "Le Résilient Persévérant": {
      description: "Tu n’abandonnes pas face aux erreurs : tu analyses, corriges et recommences.",
      traits: ["resilient", "studieux"],
      career: "Ingénieur Machine Learning, Développeur Data, Analyste"
    },
    "Le Visionnaire Pratique": {
      description: "Tu te vois évoluer dans un monde où la donnée est au cœur des décisions.",
      traits: ["visionnaire", "pratique"],
      career: "Consultant stratégique data, Data Strategist, Entrepreneur dans la data"
    }
  }
};


  // Variables globales
  let selectedCategory = "Matières Général";
  let currentQuestionIndex = 0;
  let scores = {};
  let currentQuestions = [];

  // Éléments DOM
  const card1 = document.getElementById('card1');
  const card2 = document.getElementById('card2');
  const roundIndicator = document.getElementById('roundIndicator');
  const categoryElements = document.querySelectorAll('.category');

  // Permet d'initialiser les scores
  function initializeScores() {
    scores = {
      // Matières Général
      statistique: 0, analytique: 0, securite: 0, logique: 0, technique: 0, 
      systematique: 0, protection: 0, donnees: 0,
      // Mathématique Général
      web: 0, interface: 0, mobile: 0, innovation: 0, visualisation: 0, 
      communication: 0, ludique: 0, creatif: 0, investigation: 0, methodique: 0,
      // Programmation Général
      independant: 0, concentre: 0, collaboratif: 0, social: 0, leadership: 0,
      decisif: 0, supportif: 0, cooperatif: 0, adaptable: 0, flexible: 0,
      planificateur: 0, organise: 0, structure: 0, discipline: 0, liberte: 0,
      // Anglais/Droit/Eco
      pragmatique: 0, actif: 0, academique: 0, specialisation: 0, stabilite: 0,
      entrepreneur: 0, innovant: 0, formation: 0, expertise: 0, experience: 0,
      pratique: 0, international: 0, aventurier: 0, local: 0, ancrage: 0,
      // Vos Motivations Général
      festif: 0, calme: 0, studieux: 0, sante: 0, numerique: 0, detente: 0,
      travailleur: 0, ambitieux: 0, equilibre: 0, ressourcement: 0, engagement: 0,
      altruiste: 0, personnel: 0, autonome: 0
    };
  }

  // Permet le calcul du profil dominant pour un thème
  function calculateDominantProfile(category) {
    const profiles = personalityProfiles[category];
    let maxScore = 0;
    let dominantProfile = null;

    for (const [profileName, profileData] of Object.entries(profiles)) {
      let profileScore = 0;
      profileData.traits.forEach(trait => {
        profileScore += scores[trait] || 0;
      });
      
      if (profileScore > maxScore) {
        maxScore = profileScore;
        dominantProfile = { name: profileName, ...profileData, score: profileScore };
      }
    }

    return dominantProfile;
  }

  // Mettre à jour l'indicateur de progression
  function updateProgressIndicator() {
    const totalQuestions = currentQuestions.length;
    const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
    
    roundIndicator.innerHTML = `
      <div style="margin-bottom: 0.5rem;">
        Question ${currentQuestionIndex + 1} sur ${totalQuestions}
      </div>
      <div style="background: rgba(255,255,255,0.3); border-radius: 10px; height: 8px; overflow: hidden;">
        <div style="background: #4CAF50; height: 100%; width: ${progress}%; transition: width 0.3s ease; border-radius: 10px;"></div>
      </div>
    `;
  }

  // On affiche une question
  function displayQuestion() {
    if (currentQuestionIndex < currentQuestions.length) {
      const question = currentQuestions[currentQuestionIndex];
      
      // et on met à jour l'indicateur
      updateProgressIndicator();
      
      //Avec un affichage de la question
      card1.innerHTML = `
        <div style="padding: 2rem; text-align: center; min-height: 300px; display: flex; flex-direction: column; justify-content: center;">
          <h3 style="font-size: 1.3rem; margin-bottom: 2rem; color: #2c3e50; line-height: 1.4;">
            ${question.question}
          </h3>
          <div style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; padding: 1.5rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;">
            <h4 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Option A</h4>
            <p style="font-size: 1.1rem; line-height: 1.4;">${question.choiceA.text}</p>
          </div>
        </div>
      `;

      card2.innerHTML = `
        <div style="padding: 2rem; text-align: center; min-height: 300px; display: flex; flex-direction: column; justify-content: center;">
          <h3 style="font-size: 1.3rem; margin-bottom: 2rem; color: #2c3e50; line-height: 1.4;">
            ${question.question}
          </h3>
          <div style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; padding: 1.5rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;">
            <h4 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Option B</h4>
            <p style="font-size: 1.1rem; line-height: 1.4;">${question.choiceB.text}</p>
          </div>
        </div>
      `;
    } else {
      showResults();
    }
  }

  // Puis, on doit traiter la réponse et 
  function handleAnswer(choice) {
    const question = currentQuestions[currentQuestionIndex];
    const selectedChoice = choice === 'A' ? question.choiceA : question.choiceB;
    
    // on ajoutera les points au score
    Object.entries(selectedChoice.points).forEach(([trait, points]) => {
      scores[trait] += points;
    });

    currentQuestionIndex++;
    
    // Petite animation de la transition
    document.querySelector('.card-container').style.opacity = '0.5';
    setTimeout(() => {
      displayQuestion();
      document.querySelector('.card-container').style.opacity = '1';
    }, 200);
  }

  // Affichage du résultat
  function showResults() {
    const profile = calculateDominantProfile(selectedCategory);
    
    if (profile) {
      document.body.classList.add('victory-background');
      document.body.innerHTML = `
        <button class="btn-finish">← Retour aux catégories</button>
        <div class="winner">
          <h1>🎯 Votre Profil : ${selectedCategory}</h1>
          <h2>${profile.name}</h2>
          <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 15px; margin: 2rem 0; backdrop-filter: blur(10px);">
            <p style="font-size: 1.2rem; line-height: 1.6; color: black; margin-bottom: 1.5rem;">
              ${profile.description}
            </p>
            <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 10px; margin-top: 1rem;">
              <h4 style="color: #f39c12; margin-bottom: 0.5rem;">💼 Débouchés recommandés :</h4>
              <p style="color: black; font-weight: 600;">${profile.career}</p>
            </div>
          </div>
          <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <button id="btn-other-category" class="gradient-button">🔄 Tester une autre catégorie</button>
            <button id="btn-stats" class="gradient-button">📊 Voir mes statistiques</button>
          </div>
        </div>
      `;

      // Événements pour les boutons de résultat
      document.querySelector('.btn-finish').addEventListener('click', () => {
        location.reload();
      });

      document.getElementById('btn-other-category').addEventListener('click', () => {
        location.reload();
      });

      document.getElementById('btn-stats').addEventListener('click', () => {
        showDetailedStats();
      });
    }
  }

  // Afficher les statistiques détaillées
  function showDetailedStats() {
    let statsHTML = `
      <button class="btn-finish">← Retour</button>
      <div class="winner">
        <h1>📊 Vos Statistiques Détaillées</h1>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 2rem 0;">
    `;

    // Grouper les scores par catégories
    const statCategories = {
      "Orientation Académique": ["statistique", "analytique", "academique", "formation"],
      "Compétences Techniques": ["technique", "logique", "systematique", "methodique"],
      "Créativité & Innovation": ["creatif", "innovation", "ludique", "entrepreneur"],
      "Leadership & Social": ["leadership", "collaboratif", "social", "engagement"],
      "Autonomie & Organisation": ["independant", "planificateur", "organise", "discipline"]
    };

    Object.entries(statCategories).forEach(([categoryName, traits]) => {
      statsHTML += `
        <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px);">
          <h3 style="color: #f39c12; margin-bottom: 1rem;">${categoryName}</h3>
      `;
      
      traits.forEach(trait => {
        const score = scores[trait] || 0;
        const percentage = Math.min((score / 9) * 100, 100); // Normalisation sur 9 points max
        
        if (score > 0) {
          statsHTML += `
            <div style="margin-bottom: 0.8rem;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                <span style="color: white; font-size: 0.9rem; text-transform: capitalize;">${trait}</span>
                <span style="color: white; font-weight: 600;">${score} pts</span>
              </div>
              <div style="background: rgba(255,255,255,0.3); border-radius: 5px; height: 6px; overflow: hidden;">
                <div style="background: linear-gradient(90deg, #4CAF50, #45a049); height: 100%; width: ${percentage}%; border-radius: 5px; transition: width 0.5s ease;"></div>
              </div>
            </div>
          `;
        }
      });
      
      statsHTML += `</div>`;
    });

    statsHTML += `
        </div>
        <button id="btn-new-test" class="gradient-button">🔄 Refaire le test</button>
      </div>
    `;

    document.body.innerHTML = statsHTML;

    // Événements pour les boutons
    document.querySelector('.btn-finish').addEventListener('click', () => {
      location.reload();
    });

    document.getElementById('btn-new-test').addEventListener('click', () => {
      location.reload();
    });
  }

  // Initialiser le quiz pour une catégorie
  function initializeQuiz() {
    const category = selectedCategory;
    currentQuestions = questionsData[category] || [];
    currentQuestionIndex = 0;
    
    if (currentQuestions.length > 0) {
      displayQuestion();
    } else {
      document.querySelector('.card-container').innerHTML = `
        <div class="winner">
          <h2>Aucune question disponible pour cette catégorie</h2>
        </div>
      `;
    }
  }

  // Mapper les data-category aux vraies catégories
  const categoryMapping = {
    "Matières Général": "Matières Général",
    "Mathématique Général": "Mathématique Général", 
    "Programmation Général": "Programmation Général",
    "Anglais/Droit/Eco/Communication": "Anglais/Droit/Eco/Communication",
    "Vos Motivations Général": "Vos Motivations Général"
  };

  // Gestion des événements de catégorie
  categoryElements.forEach(elem => {
    elem.addEventListener('click', () => {
      categoryElements.forEach(e => e.classList.remove('selected'));
      elem.classList.add('selected');
      const dataCategory = elem.getAttribute('data-category');
      selectedCategory = categoryMapping[dataCategory] || dataCategory;
      initializeScores();
      initializeQuiz();
    });
  });

  // Gestion des clics sur les cartes
  card1.addEventListener('click', () => handleAnswer('A'));
  card2.addEventListener('click', () => handleAnswer('B'));

  // Initialisation
  initializeScores();
  initializeQuiz();
});
function afficherQuestion(questionIndex) {
  const question = questions[questionIndex];

  // Animation de sortie des anciennes cartes
  gsap.to(".card", {
    duration: 0.5,
    y: 50,
    opacity: 0,
    stagger: 0.1,
    ease: "power2.in",
    onComplete: () => {
      // Remplace le contenu APRÈS la sortie
      document.querySelector("#card1").innerHTML = `
        <h3>${question.optionA.title}</h3>
        <p>${question.optionA.text}</p>
      `;
      document.querySelector("#card2").innerHTML = `
        <h3>${question.optionB.title}</h3>
        <p>${question.optionB.text}</p>
      `;

      // Animation d'entrée des nouvelles cartes
      gsap.fromTo(".card",
        { y: -50, opacity: 0 },
        { duration: 0.6, y: 0, opacity: 1, stagger: 0.2, ease: "power2.out" }
      );
    }
  });
}
    </script> 
  </body>
  </html>
